Since many optimization phases before the register allocation including instruction scheduling [4], store-to-copy promotion [5], and static single assignment (SSA) translation [6] leave behind many copies that slow down program execution, it is essential to minimize those copies.
This paper proposes a new coalescing heuristic called optimistic coalescing which optimistically coalesces all pairs of non-interfering nodes as in Chaitin's heuristic, yet when a coalesced node needs to be spilled, the node is split back into two separate nodes, giving up the coalescing.
On the other hand, if a node interferes with both nodes being coalesced, the degree of the node is reduced by one, which may expose further opportunities for simplifying the graph.
When aggressive coalescing is employed in Briggs' optimistic allocator, our experimental results indicate that the positive impact can well outweigh the negative impact, coloring the graph better than conservative coalescing or iterated coalescing (see Section 5).
These copies, unlike other copies that can be coalesced aggressively, must be coalesced "conser- vatively" because reckless coalescing would completely restore the transformation performed for rematerial- ization, and it is undesirable to coalesce the two nodes with different rematerialization tags if there is a chance for the coalesced node to be spilled.
When all non-copy-related nodes are significant-degree nodes and no two copy- related nodes are coalescible any more, the allocator freezes one of low-degree, copy-related nodes, if there is any.
Regarding the spatial overhead of optimistic coa- lescing, the allocator should keep the information on the original interference edges of those nodes being coalesced due to possibility of live range splitting (it is freed right after coalescing in other heuristics).
Benchmark Num. of Nodes in Num. of Nodes in Aggressive Optimistic Coalesced Chunks Violating Chunks Num. of Spilled Ratio Num. of Spilled Ratio (Num. of Chunks) (Num. of Chunks) Nodes (Chunks) % Nodes (Chunks) % espresso 12731 (4134) 9659 (2987) 911 (352) 9.4 629 (397) 6.5 li 1478 ( 492) compress sed average 5.6 3.2  Table  1.
